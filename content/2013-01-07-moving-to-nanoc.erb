---
title: Moving to Nanoc
h1: Moving to Nanoc
kind: article
created_at: 2013-01-07
categories:
- nanoc
- blog
- autobuild
- sward

---

I had been blogging in the past at aknv.wordpress.com. I have shifted here from wordpress.

The blog is hosted over an EC2 instance, that fetches data from <a href="http://github.com/vipulnsward/nanoc-blog">this repo</a>

I have used <a href="http://http://nanoc.stoneship.org/">Nanoc</a> a ruby publishing system, modified to fit my needs.
There are many others out there, but Nanoc is pretty simple and unique in the way it builds.

<a href="http://thomas.pelletier.im/2012/02/switching-to-nanoc/"> This</a> article hepled me to set up the autobuild process.
Its a sinatra app which is triggered by post-commit hooks from the github-repo, and on being hit refreshes the remote repo,
with current data.
<pre><code class="language-ruby">

  require 'sinatra'

  $output_dir = "/var/www/web/nginx_web/"
  $logs_dir = "/var/www/web/.logs/"

  configure do
  set :port, 2246
  set :bind, '127.0.0.1'
  end

  post '/' do
  current_dir = File.dirname(__FILE__)
  log_file = "#{$logs_dir}/#{Time.now.iso8601}"

  %x(cd #{current_dir} && git pull origin master)
  %x(cd #{current_dir} && nanoc compile > #{log_file})
  %x(rm -R #{$output_dir}/* 2>> #{log_file})
  %x(cd #{current_dir} && mv #{current_dir}/output/* #{$output_dir}/ 2>> #{log_file})
  end

</code></pre>


Categories and category pages are autogenerated, by <a href="https://github.com/vipulnsward/nanoc-blog/blob/master/lib/categories.rb">this</a>
sleek module

Hope to publish more of my work here, moving ahead.


